// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Team Model
model Team {
  id            String    @id @default(cuid())
  name          String    @unique
  shortName     String
  responsiveName String?
  badgeUrl      String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  homeMatches   Match[]   @relation("HomeTeam")
  awayMatches   Match[]   @relation("AwayTeam")
  players       Player[]
  standings     Standing[]
  
  @@map("teams")
}

// Match Model
model Match {
  id            String    @id @default(cuid())
  homeTeamId    String
  awayTeamId    String
  homeScore     Int?
  awayScore     Int?
  status        String    // "live", "finished", "upcoming"
  matchTime     String?
  date          String
  stadium       String?
  league        String    @default("Premier League")
  featured      Boolean   @default(false)
  homeFormation String?
  awayFormation String?
  homeManager   String?
  awayManager   String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  homeTeam      Team      @relation("HomeTeam", fields: [homeTeamId], references: [id])
  awayTeam      Team      @relation("AwayTeam", fields: [awayTeamId], references: [id])
  
  @@map("matches")
}

// Player Model
model Player {
  id            String    @id @default(cuid())
  name          String
  number        Int
  position      String?   // "GK", "DEF", "MID", "FWD"
  teamId        String
  isSubstitute  Boolean   @default(false)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  team          Team      @relation(fields: [teamId], references: [id])
  
  @@map("players")
}

// Standing Model
model Standing {
  id            String    @id @default(cuid())
  teamId        String
  position      Int
  played        Int       @default(0)
  win           Int       @default(0)
  draw          Int       @default(0)
  loss          Int       @default(0)
  goalsFor      Int       @default(0)
  goalsAgainst  Int       @default(0)
  goalDiff      Int       @default(0)
  points        Int       @default(0)
  form          String[]  // Array of "W", "D", "L"
  season        String    @default("2024-2025")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  team          Team      @relation(fields: [teamId], references: [id])
  
  @@unique([teamId, season])
  @@map("standings")
}

// Fixture Calendar Model
model FixtureCalendar {
  id            String    @id @default(cuid())
  month         String
  day           String
  date          Int
  matchweek     Int?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  @@map("fixture_calendar")
}
